<div id="target_super" style="height: 100%; width: 100%;" (window:resize)="onResize($event)" >
  <svg [attr.width]="width" [attr.height]="height">
    <symbol id="target" [attr.viewBox]="viewBox">
      <svg:g app-background *ngIf="target" [target]="target"/>
      <ng-container *ngFor="let shot of series.shots; let i = index">
        <svg:g app-shot
          *ngIf="selectedShotIndex != i"
          [shot]="shot"
          [target]="target"
          [transparent] = "true"
        />
      </ng-container>  
      <ng-container *ngIf="series.shots[selectedShotIndex]">
        <svg:g app-shot
          [shot]="series.shots[selectedShotIndex]"
          [target]="target"
          [transparent] = "false"
        />
      </ng-container>  
    </symbol>
    
    <symbol id="trialCorner" viewBox="0 0 100 100" preserveAspectRatio="xMaxYMin meet">
      <svg:polygon
        points="70 2.5, 97.5 2.5, 97.5 30"
        [attr.fill]="target.trial_corner_color.hex"
        [attr.opacity]="target.trial_corner_color.alpha"
      />
    </symbol>
    
    <svg:use xlink:href="#target" />
    <svg:use *ngIf="has_trial_corner" xlink:href="#trialCorner" />
  </svg>
</div>
